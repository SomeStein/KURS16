**FREE
// ------------------------------------------------------------------
// Programm: AUFG003EXT  - Basierend auf AUFG003. Deklariert eine procedure, welche Text in einem varchar(50) zentriert.
// Es werden 5 Beispiele (Siehe 5 Testfälle) displayed.
// ------------------------------------------------------------------
ctl-opt dftactgrp(*no) actgrp(*new);

// -------------------- Main (Testfälle) ----------------------------
dcl-s result varchar(50);

// 5 Testfälle
result = centralized('Hallo, Welt!');
dsply ('|' + result + '|');

result = centralized('Das ist ein test-text mit ca. 40 Zeichen.');
dsply ('|' + result + '|');

result = centralized('----+----1----+----2----+----3----+----4----+----5');
dsply ('|' + result + '|');

result = centralized('          ');
dsply ('|' + result + '|');

result = centralized('     Text, der mit 5 Leerzeichen beinnt.');
dsply ('|' + result + '|');

// Ende Main
*inlr = *on;

// -------------------- Implementierung der Prozedur ----------------
dcl-proc centralized;
    dcl-pi *n varchar(50);
        inStr varchar(50) const;
    end-pi;

  // lokale Variablen
    dcl-s len       int(5);
    dcl-s padLeft   int(5);
    dcl-s padRight  int(5);
    dcl-s i         int(5);
    dcl-s trimmed   varchar(50);
    dcl-s leftPad   varchar(50);
    dcl-s rightPad  varchar(50);
    dcl-s result    varchar(50);

  // 1) trimmen
    trimmed = %trim(inStr);
    len = %len(trimmed);

  // 2) falls Eingabe länger/gleich 50 -> abschneiden
    if len >= 50;
    // falls länger, einfach die ersten 50 Zeichen zurückgeben
        return %subst(trimmed:1:50);
    endif;

  // 3) Padding-Berechnung

    padLeft = %int((50 - len) / 2);
    padRight = 50 - len - padLeft;

  // 4) Links-Padding in Schleife aufbauen
    leftPad = '';
    for i = 1 to padLeft;
        leftPad = leftPad + ' ';
    endfor;

  // 5) Rechts-Padding in Schleife aufbauen
    rightPad = '';
    for i = 1 to padRight;
        rightPad = rightPad + ' ';
    endfor;

  // 6) zusammensetzen und zurückgeben
    result = leftPad + trimmed + rightPad;
    return result;

end-proc;
